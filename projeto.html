<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalhes do Projeto</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app">
        <a href="index.html" class="back-button">
            <svg fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"/>
            </svg>
            {{ t('backToResume') }}
        </a>

        <div class="container">
            <div class="hero" :style="{ backgroundImage: `url(${project.image})` }">
                <div class="hero-content">
                    <h1 class="hero-title">{{ project.title }}</h1>
                </div>
            </div>

            <div class="content">
                <div class="section">
                    <h2 class="section-title">{{ t('aboutProject') }}</h2>
                    <p class="description">{{ currentLang === 'pt' ? project.longDescription : project.longDescriptionEn }}</p>
                </div>

                <div class="section">
                    <h2 class="section-title">{{ t('screenshots') }}</h2>
                    <div class="screenshots-grid">
                        <div v-if="!project.screenshots || project.screenshots.length === 0" class="screenshot">
                            <img src="https://via.placeholder.com/600x400/667eea/ffffff?text=Sem+Screenshots" :alt="t('noScreenshots')">
                        </div>
                        <div v-for="(img, idx) in project.screenshots" :key="idx" class="screenshot">
                            <img :src="img" :alt="`Screenshot ${idx + 1}`">
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h2 class="section-title">{{ t('whatAppDoes') }}</h2>
                    <p class="description">{{ (currentLang === 'pt' ? project.what : project.whatEn) || t('noFunctionalDescription') }}</p>
                </div>

                <div class="section">
                    <h2 class="section-title">{{ t('mainTools') }}</h2>
                    <div class="project-tags tools-tags">
                        <span v-if="!project.tools || project.tools.length === 0" class="tool-item">{{ t('noToolsSpecified') }}</span>
                        <span v-for="(tool, idx) in project.tools" :key="idx" class="project-tag">
                            {{ tool }}
                        </span>
                    </div>
                </div>

                <div class="cta-section">
                    <h2 class="cta-title">{{ t('interestedInProject') }}</h2>
                    <p class="cta-description">{{ t('checkSourceCode') }}</p>
                    <div class="cta-buttons">
                        <a v-for="(link, i) in project.links" :key="i" :href="typeof link === 'string' ? link : (link.url || '#')" target="_blank" class="cta-button">
                            <svg v-if="(link && link.icon) === 'github' || (typeof link !== 'string' && link.icon === 'github')" fill="currentColor" viewBox="0 0 20 20" width="20" height="20">
                                <path fill-rule="evenodd" d="M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0110 4.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.31.678.921.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0020 10.017C20 4.484 15.522 0 10 0z" clip-rule="evenodd"/>
                            </svg>
                            <svg v-else-if="(link && link.icon) === 'figma' || (typeof link !== 'string' && link.icon === 'figma')" viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                                <circle cx="6" cy="6" r="3"></circle>
                                <rect x="3" y="9" width="6" height="6" rx="3"></rect>
                                <rect x="9" y="9" width="6" height="6" rx="3"></rect>
                            </svg>
                            <svg v-else-if="link && link.icon && link.icon.includes('apple')" viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                                <path d="M17.05 20.28c-.98.95-2.05.88-3.08.4-1.09-.5-2.08-.48-3.24 0-1.44.62-2.2.44-3.06-.4C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.54 4.09l.01-.01zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z"/>
                            </svg>
                            <svg v-else viewBox="0 0 20 20" width="20" height="20" fill="currentColor">
                                <path d="M10 2a6 6 0 100 12 6 6 0 000-12zM4 10a6 6 0 0112 0" />
                            </svg>
                            {{ typeof link === 'string' ? t('viewProject') : t(link.label || t('viewProject')) }}
                        </a>
                        <a href="index.html" class="cta-button secondary">
                            <svg fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"/>
                            </svg>
                            {{ t('backToResume') }}
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue;

        createApp({
            data() {
                return {
                    currentLang: localStorage.getItem('lang') || 'pt',
                    translations: {
                        pt: {
                            backToResume: 'Voltar ao Currículo',
                            aboutProject: 'Sobre o Projeto',
                            whatAppDoes: 'O que o app faz',
                            noFunctionalDescription: 'Descrição funcional não informada para este projeto.',
                            mainTools: 'Ferramentas Principais',
                            noToolsSpecified: 'Nenhuma ferramenta especificada para este projeto.',
                            screenshots: 'Screenshots',
                            noScreenshots: 'Sem screenshots',
                            interestedInProject: 'Interessado neste projeto?',
                            checkSourceCode: 'Confira o código-fonte e a demonstração ao vivo!',
                            viewProject: 'Ver projeto',
                            'Ver no GitHub': 'Ver no GitHub',
                            'View on GitHub': 'View on GitHub',
                            'Ver na Apple Store': 'Ver na Apple Store',
                            'View on App Store': 'View on App Store',
                            'Ver no Figma': 'Ver no Figma',
                            'View on Figma': 'View on Figma'
                        },
                        en: {
                            backToResume: 'Back to Resume',
                            aboutProject: 'About the Project',
                            whatAppDoes: 'What the app does',
                            noFunctionalDescription: 'No functional description provided for this project.',
                            mainTools: 'Main Tools',
                            noToolsSpecified: 'No tools specified for this project.',
                            screenshots: 'Screenshots',
                            noScreenshots: 'No screenshots',
                            interestedInProject: 'Interested in this project?',
                            checkSourceCode: 'Check out the source code and live demo!',
                            viewProject: 'View project',
                            'Ver no GitHub': 'View on GitHub',
                            'View on GitHub': 'View on GitHub',
                            'Ver na Apple Store': 'View on App Store',
                            'View on App Store': 'View on App Store',
                            'Ver no Figma': 'View on Figma',
                            'View on Figma': 'View on Figma'
                        }
                    },
                    project: {
                        title: '',
                        shortDescription: '',
                        longDescription: '',
                        longDescriptionEn: '',
                        what: '',
                        whatEn: '',
                        image: '',
                        links: [],
                        tools: [],
                        screenshots: []
                    }
                }
            },
            mounted() {
                // Atualiza o atributo lang do documento
                document.documentElement.lang = this.currentLang === 'pt' ? 'pt-BR' : 'en';
                
                const urlParams = new URLSearchParams(window.location.search);
                
                this.project = {
                    title: urlParams.get('title') || 'Nome do Projeto',
                    shortDescription: urlParams.get('short') || '',
                    longDescription: urlParams.get('long') || 'Descrição do projeto',
                    longDescriptionEn: urlParams.get('longEn') || 'Project description',
                    what: urlParams.get('what') || '',
                    whatEn: urlParams.get('whatEn') || '',
                    image: urlParams.get('image') || 'https://via.placeholder.com/1200x400/667eea/ffffff?text=Projeto',
                    links: [],
                    tools: [],
                    screenshots: []
                };

                const linksParam = urlParams.get('links');
                if (linksParam) {
                    try {
                        this.project.links = JSON.parse(linksParam);
                    } catch (e) {
                        this.project.links = [linksParam];
                    }
                } else if (urlParams.get('link')) {
                    this.project.links = [urlParams.get('link')];
                }
                
                const toolsParam = urlParams.get('tools');
                if (toolsParam) {
                    try {
                        const parsed = JSON.parse(toolsParam);
                        this.project.tools = Array.isArray(parsed) ? parsed : [];
                    } catch (e) {
                        this.project.tools = toolsParam ? toolsParam.split(',').map(s => s.trim()).filter(Boolean) : [];
                    }
                }
                
                const screenshotsParam = urlParams.get('screenshots');
                if (screenshotsParam) {
                    try {
                        const parsed = JSON.parse(screenshotsParam);
                        this.project.screenshots = Array.isArray(parsed) ? parsed : [];
                    } catch (e) {
                        this.project.screenshots = screenshotsParam ? screenshotsParam.split(',').map(s => s.trim()).filter(Boolean) : [];
                    }
                }

                // Escuta mudanças no localStorage para sincronizar idioma entre abas/páginas
                window.addEventListener('storage', (e) => {
                    if (e.key === 'lang' && e.newValue) {
                        this.currentLang = e.newValue;
                        document.documentElement.lang = this.currentLang === 'pt' ? 'pt-BR' : 'en';
                    }
                });
            },
            methods: {
                t(key) {
                    return this.translations[this.currentLang][key] || key;
                }
            }
        }).mount('#app');
    </script>
</body>
</html>
